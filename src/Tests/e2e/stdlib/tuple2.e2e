// Stdlib.Tuple2 Tests
// Ported from https://github.com/darklang/dark/tree/main/backend/testfiles/execution/stdlib
//
// Tests for Tuple2 module functions

// ===================================================================
// Tuple2.first - Returns the first value of a pair
// ===================================================================

Tuple2.first((1, 2)) = 1
Tuple2.first((42, 0)) = 42
// NOTE: Mixed-type tuples with String have codegen issue (HeapStore)
// Tuple2.first(("hello", 5)) = stdout="hello\n"
Tuple2.first((true, false)) = stdout="true\n"

// ===================================================================
// Tuple2.second - Returns the second value of a pair
// ===================================================================

Tuple2.second((1, 2)) = 2
Tuple2.second((0, 42)) = 42
// NOTE: Mixed-type tuples with String have codegen issue (HeapStore)
// Tuple2.second((5, "world")) = stdout="world\n"
Tuple2.second((false, true)) = stdout="true\n"

// ===================================================================
// Tuple2.create - Constructs a pair from two values
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Tuple2.create(1, 2) |> Tuple2.first() = 1
// Tuple2.create(1, 2) |> Tuple2.second() = 2
// Tuple2.create("test", 5) |> Tuple2.first() = stdout="test\n"
Tuple2.first(Tuple2.create(1, 2)) = 1
Tuple2.second(Tuple2.create(1, 2)) = 2
Tuple2.first(Tuple2.create(42, 99)) = 42

// ===================================================================
// Tuple2.swap - Returns a pair with the elements swapped
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Tuple2.swap((1, 2)) |> Tuple2.first() = 2
// Tuple2.swap((1, 2)) |> Tuple2.second() = 1
// Tuple2.swap(("hello", 42)) |> Tuple2.first() = 42
// Tuple2.swap(("hello", 42)) |> Tuple2.second() = stdout="hello\n"
Tuple2.first(Tuple2.swap((1, 2))) = 2
Tuple2.second(Tuple2.swap((1, 2))) = 1
Tuple2.first(Tuple2.swap((100, 42))) = 42

// ===================================================================
// Tuple2.mapFirst - Transform the first value in a pair
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Tuple2.mapFirst((x: Int64) => x + 1, (5, 10)) |> Tuple2.first() = 6
// Tuple2.mapFirst((x: Int64) => x * 2, (5, 10)) |> Tuple2.first() = 10
// Tuple2.mapFirst((x: Int64) => x + 1, (5, 10)) |> Tuple2.second() = 10
Tuple2.first(Tuple2.mapFirst((x: Int64) => x + 1, (5, 10))) = 6
Tuple2.first(Tuple2.mapFirst((x: Int64) => x * 2, (5, 10))) = 10
Tuple2.second(Tuple2.mapFirst((x: Int64) => x + 1, (5, 10))) = 10

// ===================================================================
// Tuple2.mapSecond - Transform the second value in a pair
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Tuple2.mapSecond((x: Int64) => x + 1, (5, 10)) |> Tuple2.second() = 11
// Tuple2.mapSecond((x: Int64) => x * 2, (5, 10)) |> Tuple2.second() = 20
// Tuple2.mapSecond((x: Int64) => x + 1, (5, 10)) |> Tuple2.first() = 5
Tuple2.second(Tuple2.mapSecond((x: Int64) => x + 1, (5, 10))) = 11
Tuple2.second(Tuple2.mapSecond((x: Int64) => x * 2, (5, 10))) = 20
Tuple2.first(Tuple2.mapSecond((x: Int64) => x + 1, (5, 10))) = 5

// ===================================================================
// Tuple2.mapBoth - Transform both values in a pair
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Tuple2.mapBoth((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10)) |> Tuple2.first() = 6
// Tuple2.mapBoth((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10)) |> Tuple2.second() = 20
Tuple2.first(Tuple2.mapBoth((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10))) = 6
Tuple2.second(Tuple2.mapBoth((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10))) = 20
