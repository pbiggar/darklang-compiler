// Stdlib.Tuple2 Tests
// Ported from https://github.com/darklang/dark/tree/main/backend/testfiles/execution/stdlib
//
// Tests for Tuple2 module functions

// ===================================================================
// Stdlib.Tuple2.first - Returns the first value of a pair
// ===================================================================

Stdlib.Tuple2.first((1, 2)) = 1
Stdlib.Tuple2.first((42, 0)) = 42
// NOTE: Mixed-type tuples with String have codegen issue (HeapStore)
// Stdlib.Tuple2.first(("hello", 5)) = stdout="hello\n"
Stdlib.Tuple2.first((true, false)) = stdout="true\n"

// ===================================================================
// Stdlib.Tuple2.second - Returns the second value of a pair
// ===================================================================

Stdlib.Tuple2.second((1, 2)) = 2
Stdlib.Tuple2.second((0, 42)) = 42
// NOTE: Mixed-type tuples with String have codegen issue (HeapStore)
// Stdlib.Tuple2.second((5, "world")) = stdout="world\n"
Stdlib.Tuple2.second((false, true)) = stdout="true\n"

// ===================================================================
// Stdlib.Tuple2.create - Constructs a pair from two values
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Stdlib.Tuple2.create(1, 2) |> Stdlib.Tuple2.first() = 1
// Stdlib.Tuple2.create(1, 2) |> Stdlib.Tuple2.second() = 2
// Stdlib.Tuple2.create("test", 5) |> Stdlib.Tuple2.first() = stdout="test\n"
Stdlib.Tuple2.first(Stdlib.Tuple2.create(1, 2)) = 1
Stdlib.Tuple2.second(Stdlib.Tuple2.create(1, 2)) = 2
Stdlib.Tuple2.first(Stdlib.Tuple2.create(42, 99)) = 42

// ===================================================================
// Stdlib.Tuple2.swap - Returns a pair with the elements swapped
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Stdlib.Tuple2.swap((1, 2)) |> Stdlib.Tuple2.first() = 2
// Stdlib.Tuple2.swap((1, 2)) |> Stdlib.Tuple2.second() = 1
// Stdlib.Tuple2.swap(("hello", 42)) |> Stdlib.Tuple2.first() = 42
// Stdlib.Tuple2.swap(("hello", 42)) |> Stdlib.Tuple2.second() = stdout="hello\n"
Stdlib.Tuple2.first(Stdlib.Tuple2.swap((1, 2))) = 2
Stdlib.Tuple2.second(Stdlib.Tuple2.swap((1, 2))) = 1
Stdlib.Tuple2.first(Stdlib.Tuple2.swap((100, 42))) = 42

// ===================================================================
// Stdlib.Tuple2.mapFirst - Transform the first value in a pair
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Stdlib.Tuple2.mapFirst((x: Int64) => x + 1, (5, 10)) |> Stdlib.Tuple2.first() = 6
// Stdlib.Tuple2.mapFirst((x: Int64) => x * 2, (5, 10)) |> Stdlib.Tuple2.first() = 10
// Stdlib.Tuple2.mapFirst((x: Int64) => x + 1, (5, 10)) |> Stdlib.Tuple2.second() = 10
Stdlib.Tuple2.first<Int64, Int64>(Stdlib.Tuple2.mapFirst<Int64, Int64, Int64>((x: Int64) => x + 1, (5, 10))) = 6
Stdlib.Tuple2.first<Int64, Int64>(Stdlib.Tuple2.mapFirst<Int64, Int64, Int64>((x: Int64) => x * 2, (5, 10))) = 10
Stdlib.Tuple2.second<Int64, Int64>(Stdlib.Tuple2.mapFirst<Int64, Int64, Int64>((x: Int64) => x + 1, (5, 10))) = 10

// ===================================================================
// Stdlib.Tuple2.mapSecond - Transform the second value in a pair
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Stdlib.Tuple2.mapSecond((x: Int64) => x + 1, (5, 10)) |> Stdlib.Tuple2.second() = 11
// Stdlib.Tuple2.mapSecond((x: Int64) => x * 2, (5, 10)) |> Stdlib.Tuple2.second() = 20
// Stdlib.Tuple2.mapSecond((x: Int64) => x + 1, (5, 10)) |> Stdlib.Tuple2.first() = 5
Stdlib.Tuple2.second<Int64, Int64>(Stdlib.Tuple2.mapSecond<Int64, Int64, Int64>((x: Int64) => x + 1, (5, 10))) = 11
Stdlib.Tuple2.second<Int64, Int64>(Stdlib.Tuple2.mapSecond<Int64, Int64, Int64>((x: Int64) => x * 2, (5, 10))) = 20
Stdlib.Tuple2.first<Int64, Int64>(Stdlib.Tuple2.mapSecond<Int64, Int64, Int64>((x: Int64) => x + 1, (5, 10))) = 5

// ===================================================================
// Stdlib.Tuple2.mapBoth - Transform both values in a pair
// ===================================================================

// NOTE: Pipe with partial function application not supported - use nested calls
// Stdlib.Tuple2.mapBoth((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10)) |> Stdlib.Tuple2.first() = 6
// Stdlib.Tuple2.mapBoth((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10)) |> Stdlib.Tuple2.second() = 20
Stdlib.Tuple2.first<Int64, Int64>(Stdlib.Tuple2.mapBoth<Int64, Int64, Int64, Int64>((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10))) = 6
Stdlib.Tuple2.second<Int64, Int64>(Stdlib.Tuple2.mapBoth<Int64, Int64, Int64, Int64>((x: Int64) => x + 1, (y: Int64) => y * 2, (5, 10))) = 20
