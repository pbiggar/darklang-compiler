// String Literals E2E Tests
//
// Tests for string literal parsing, type checking, and printing

// Basic string literal printing
"hello" = hello
"world" = world
"test" = test

// Empty string (just newline output)
"" = ""

// String with spaces
"hello world" = hello world
"a b c" = a b c

// Single characters
"a" = a
"Z" = "Z"
"0" = 0

// Escape sequences - newline
"hello\nworld" = "hello\nworld"

// Escape sequences - tab
"a\tb" = "a\tb"

// Escape sequences - quote
"say \"hi\"" = "say \"hi\""

// Escape sequences - backslash
"a\\b" = "a\\b"

// Multiple newlines
"a\nb\nc" = "a\nb\nc"

// =============================================================================
// String Concatenation Tests (++ operator)
// =============================================================================

// Basic concatenation
"hello" ++ " world" = hello world
"a" ++ "b" = ab
"foo" ++ "bar" = foobar

// Empty string concatenation
"" ++ "test" = test
"test" ++ "" = test
"" ++ "" = ""

// Chained concatenation (left associative)
"a" ++ "b" ++ "c" = abc
"hello" ++ " " ++ "world" = hello world

// Variables with concatenation
let x = "hello" in x ++ " world" = hello world
let x = "a" in let y = "b" in x ++ y = ab

// Chained concatenation with multiple variables (regression test for known bug)
let x = "one" in let y = "two" in x ++ " and " ++ y = one and two
let a = "hello" in let b = "world" in let c = "!" in a ++ " " ++ b ++ c = hello world!

// Concatenation in let binding
let result = "foo" ++ "bar" in result = foobar

// Longer strings
"this is a" ++ " longer test" = this is a longer test

// Single character concatenation
"a" ++ "b" ++ "c" ++ "d" = abcd

// =============================================================================
// Int64.toString Tests
// =============================================================================

// Single digit conversion
Stdlib.Int64.digitToString(0) = 0
Stdlib.Int64.digitToString(5) = 5
Stdlib.Int64.digitToString(9) = 9

// Basic integer to string
Stdlib.Int64.toString(0) = 0
Stdlib.Int64.toString(1) = 1
Stdlib.Int64.toString(9) = 9
Stdlib.Int64.toString(10) = 10
Stdlib.Int64.toString(42) = 42
Stdlib.Int64.toString(100) = 100
Stdlib.Int64.toString(999) = 999
Stdlib.Int64.toString(1234) = 1234
Stdlib.Int64.toString(12345) = 12345

// Negative numbers
Stdlib.Int64.toString(-1) = -1
Stdlib.Int64.toString(-42) = -42
Stdlib.Int64.toString(-100) = -100
Stdlib.Int64.toString(-12345) = -12345

// Large numbers
Stdlib.Int64.toString(1000000) = 1000000
Stdlib.Int64.toString(2147483647) = 2147483647

// Concatenation with toString
"Value: " ++ Stdlib.Int64.toString(42) = "Value: 42"
"Answer is " ++ Stdlib.Int64.toString(42) ++ "!" = "Answer is 42!"

// =============================================================================
// Bool.toString Tests
// =============================================================================

Stdlib.Bool.toString(true) = true
Stdlib.Bool.toString(false) = false
"The answer is " ++ Stdlib.Bool.toString(true) = "The answer is true"
"Flag: " ++ Stdlib.Bool.toString(1 > 0) = "Flag: true"

// =============================================================================
// String Interpolation Tests
// =============================================================================

// Basic interpolation with string variable
let name = "Alice" in $"Hello {name}" = "Hello Alice"

// Just interpolation (no literal parts)
let name = "Dave" in $"{name}" = "Dave"

// Escape sequences in interpolated strings
$"Hello\nWorld" = "Hello\nWorld"
$"Tab\there" = "Tab\there"

// No interpolation (just like regular string)
$"plain string" = plain string

// Empty interpolated string
$"" = ""

// Interpolation with string literals
$"{"hello"}" = hello
$"Say: {"hi"}" = "Say: hi"

// Expression with operators (string concat inside interpolation)
$"{"a" ++ "b"}" = ab

// NOTE: Multiple interpolations like $"{x} and {y}" trigger a pre-existing bug
// in chained string concatenation code generation - to be fixed separately

// =============================================================================
// Stdlib.String.getByteAt Tests
// =============================================================================

// Get bytes from ASCII string "abc" = 97, 98, 99
Stdlib.String.getByteAt("abc", 0) = 97
Stdlib.String.getByteAt("abc", 1) = 98
Stdlib.String.getByteAt("abc", 2) = 99

// Get bytes from uppercase "ABC" = 65, 66, 67
Stdlib.String.getByteAt("ABC", 0) = 65
Stdlib.String.getByteAt("ABC", 1) = 66
Stdlib.String.getByteAt("ABC", 2) = 67

// Get byte from single character
Stdlib.String.getByteAt("x", 0) = 120

// Get space character (ASCII 32)
Stdlib.String.getByteAt(" ", 0) = 32

// Get digits
Stdlib.String.getByteAt("0", 0) = 48
Stdlib.String.getByteAt("9", 0) = 57

// Helper functions for character type checks
Stdlib.String.__isLowercase(97) = true
Stdlib.String.__isLowercase(122) = true
Stdlib.String.__isLowercase(65) = false
Stdlib.String.__isUppercase(65) = true
Stdlib.String.__isUppercase(90) = true
Stdlib.String.__isUppercase(97) = false

// =============================================================================
// Stdlib.String.startsWith Tests
// =============================================================================

// Basic startsWith
Stdlib.String.startsWith("hello world", "hello") = true
Stdlib.String.startsWith("hello world", "world") = false
Stdlib.String.startsWith("abc", "a") = true
Stdlib.String.startsWith("abc", "ab") = true
Stdlib.String.startsWith("abc", "abc") = true
Stdlib.String.startsWith("abc", "abcd") = false

// Empty string cases
Stdlib.String.startsWith("hello", "") = true
Stdlib.String.startsWith("", "") = true
Stdlib.String.startsWith("", "a") = false

// =============================================================================
// Stdlib.String.endsWith Tests
// =============================================================================

// Basic endsWith
Stdlib.String.endsWith("hello world", "world") = true
Stdlib.String.endsWith("hello world", "hello") = false
Stdlib.String.endsWith("abc", "c") = true
Stdlib.String.endsWith("abc", "bc") = true
Stdlib.String.endsWith("abc", "abc") = true
Stdlib.String.endsWith("abc", "xabc") = false

// Empty string cases
Stdlib.String.endsWith("hello", "") = true
Stdlib.String.endsWith("", "") = true
Stdlib.String.endsWith("", "a") = false

// =============================================================================
// Stdlib.String.indexOf Tests
// =============================================================================

// Basic indexOf
Stdlib.String.indexOf("hello world", "hello") = 0
Stdlib.String.indexOf("hello world", "world") = 6
Stdlib.String.indexOf("hello world", "o") = 4
Stdlib.String.indexOf("hello world", "o w") = 4

// Not found
Stdlib.String.indexOf("hello world", "xyz") = -1
Stdlib.String.indexOf("abc", "d") = -1

// Empty string search
Stdlib.String.indexOf("hello", "") = 0
Stdlib.String.indexOf("", "") = 0

// =============================================================================
// Stdlib.String.contains Tests
// =============================================================================

// Basic contains
Stdlib.String.contains("hello world", "hello") = true
Stdlib.String.contains("hello world", "world") = true
Stdlib.String.contains("hello world", "o w") = true
Stdlib.String.contains("hello world", "xyz") = false

// Empty string cases
Stdlib.String.contains("hello", "") = true
Stdlib.String.contains("", "") = true
Stdlib.String.contains("", "a") = false

// =============================================================================
// Stdlib.String.slice Tests
// =============================================================================

// Basic slice
Stdlib.String.slice("hello world", 0, 5) = hello
Stdlib.String.slice("hello world", 6, 5) = world
Stdlib.String.slice("hello world", 0, 11) = hello world

// Slice from middle
Stdlib.String.slice("abcdef", 2, 3) = cde

// Empty result
Stdlib.String.slice("hello", 0, 0) = ""
Stdlib.String.slice("hello", 5, 0) = ""

// Clamping behavior
Stdlib.String.slice("hello", 0, 100) = hello
Stdlib.String.slice("hello", 10, 5) = ""

// =============================================================================
// Stdlib.String.take and drop Tests
// =============================================================================

// take
Stdlib.String.take("hello world", 5) = hello
Stdlib.String.take("hello", 0) = ""
Stdlib.String.take("hello", 100) = hello

// drop
Stdlib.String.drop("hello world", 6) = world
Stdlib.String.drop("hello", 0) = hello
Stdlib.String.drop("hello", 100) = ""

// =============================================================================
// Stdlib.String.substring Tests
// =============================================================================

Stdlib.String.substring("hello world", 0, 5) = hello
Stdlib.String.substring("hello world", 6, 11) = world
