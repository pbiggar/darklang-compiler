// Tests imported from Dark language test suite
// Source: https://raw.githubusercontent.com/darklang/dark/main/backend/testfiles/execution/language/collections/dtuple.dark
//
// ALL TESTS INCLUDED - no filtering or removal
// Tests may fail if features are not yet implemented

// ===================================================================
// Tuple literals (from Dark dtuple.dark)
// ===================================================================

(1L, 2L) = stdout="(1, 2)\n"
(1L, 2L, 3L) = stdout="(1, 2, 3)\n"
(1L, 2L + 3L, 4L) = stdout="(1, 5, 4)\n"

// No upper limit on tuple size
(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L) = stdout="(1, 2, 3, 4, 5, 6, 7, 8, 9)\n"

// ===================================================================
// Error handling tests
// NOTE: Commented out - requires Builtin.testRuntimeError/testDerrorMessage support
// ===================================================================

// (1L, Builtin.testRuntimeError "test", 3L) = Builtin.testDerrorMessage "Uncaught exception: test"

// (1L, Builtin.testRuntimeError "error1", Builtin.testRuntimeError "error2") = Builtin.testDerrorMessage "Uncaught exception: error1"

// ===================================================================
// Basic Tuple Construction (from extended suite)
// ===================================================================

// 2-tuples
(1, 2) = stdout="(1, 2)\n"
(0, 0) = stdout="(0, 0)\n"
(42, 99) = stdout="(42, 99)\n"

// 3-tuples
(1, 2, 3) = stdout="(1, 2, 3)\n"
(10, 20, 30) = stdout="(10, 20, 30)\n"

// 4-tuples
(1, 2, 3, 4) = stdout="(1, 2, 3, 4)\n"

// 5-tuples
(1, 2, 3, 4, 5) = stdout="(1, 2, 3, 4, 5)\n"

// ===================================================================
// Tuples with Expressions
// ===================================================================

(1 + 1, 2 + 2) = stdout="(2, 4)\n"
(2 * 3, 4 * 5) = stdout="(6, 20)\n"
(10 - 3, 20 - 5) = stdout="(7, 15)\n"
(20 / 4, 30 / 6) = stdout="(5, 5)\n"

(1, 2 + 3, 4) = stdout="(1, 5, 4)\n"
(1 * 2, 3 + 4, 5 - 1) = stdout="(2, 7, 4)\n"

// ===================================================================
// Tuple Pattern Matching
// ===================================================================

match (1, 2) with | (a, b) -> a + b = 3
match (10, 20) with | (a, b) -> a * b = 200
match (100, 1) with | (a, b) -> a - b = 99

match (1, 2, 3) with | (a, b, c) -> a + b + c = 6
match (2, 3, 4) with | (a, b, c) -> a * b * c = 24

match (1, 2, 3, 4) with | (a, b, c, d) -> a + b + c + d = 10

match (1, 2, 3, 4, 5) with | (a, b, c, d, e) -> a + b + c + d + e = 15

// ===================================================================
// Tuple with Wildcard Patterns
// ===================================================================

match (42, 99) with | (x, _) -> x = 42
match (1, 2, 3) with | (x, _, _) -> x = 1

match (99, 42) with | (_, y) -> y = 42
match (1, 2, 3) with | (_, _, z) -> z = 3

match (1, 42, 3) with | (_, x, _) -> x = 42

match (1, 2) with | (_, _) -> 100 = 100
match (1, 2, 3) with | (_, _, _) -> 100 = 100

// ===================================================================
// Tuple Let Destructuring
// ===================================================================

let (a, b) = (5, 10) in a + b = 15
let (x, y, z) = (1, 2, 3) in x * y * z = 6
let (first, _) = (42, 0) in first = 42
let (_, second) = (0, 42) in second = 42

// ===================================================================
// Tuples with Variables
// ===================================================================

let x = 5 in let y = 10 in (x, y) = stdout="(5, 10)\n"
let a = 1 in let b = 2 in let c = 3 in (a, b, c) = stdout="(1, 2, 3)\n"

let x = 5 in (x, x + 1, x + 2) = stdout="(5, 6, 7)\n"
let x = 2 in (x * 1, x * 2, x * 3) = stdout="(2, 4, 6)\n"

// ===================================================================
// Tuple in Let Body
// ===================================================================

let t = (1, 2) in match t with | (a, b) -> a + b = 3
let t = (10, 20, 30) in match t with | (a, b, c) -> a + b + c = 60

// ===================================================================
// Nested Tuple Operations
// NOTE: First test commented out - match returning value issue
// ===================================================================

// let x = match (1, 2) with | (a, b) -> a + b in x = 3

let t1 = (1, 2) in let t2 = (3, 4) in match t1 with | (a, b) -> match t2 with | (c, d) -> a + b + c + d = 10

// ===================================================================
// Tuples with Booleans
// ===================================================================

(true, false) = stdout="(true, false)\n"
(true, true) = stdout="(true, true)\n"
(false, false) = stdout="(false, false)\n"

match (true, false) with | (a, _) -> if a then 1 else 0 = 1
match (false, true) with | (_, b) -> if b then 1 else 0 = 1

// ===================================================================
// Complex Tuple Expressions
// ===================================================================

(1 == 1, 2 == 3) = stdout="(true, false)\n"
(5 > 3, 2 < 1) = stdout="(true, false)\n"

let x = 5 in (x * 2, x > 3) = stdout="(10, true)\n"

// ===================================================================
// Edge Cases
// ===================================================================

(0, 0) = stdout="(0, 0)\n"
(0, 0, 0) = stdout="(0, 0, 0)\n"

(42, 42) = stdout="(42, 42)\n"
(7, 7, 7) = stdout="(7, 7, 7)\n"

(0 - 1, 0 - 2) = stdout="(-1, -2)\n"

(1000000, 2000000) = stdout="(1000000, 2000000)\n"

// ===================================================================
// Tuples with Floats
// ===================================================================

(1.5, 2.5) = stdout="(1.50, 2.50)\n"
(1.0, 2.0, 3.0) = stdout="(1.00, 2.00, 3.00)\n"
